{% extends 'base.html' %}
{% block title%}
<title>Update Product</title>
{%endblock title%}
{% block content %}
<div class="row d-flex justify-content-center align-items-center my-5">
	<h2 class="fw-bold text-center">Product update form</h2>
	<div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 border border-dark p-5">
		<form method="post" novalidate enctype="multipart/form-data">
			{% csrf_token %}
			<h6>Name:{{form.name}}</h6>
			<h6>Image:{{form.image}}</h6>
			<h6>Price:{{form.price}}</h6>
			<h6>Quantity:{{form.quantity}}</h6>
			<h6>Manufacturing date:{{form.manufacturing_date}}</h6>
			<h6>Expiry date:{{form.expiry_date}}</h6>
			<h6>Description:{{form.description}}</h6>
			<h6 class="my-3">Company:</h6>
			<h6>If you want to choose from the existing companies then choose on from below:</h6>
			{% for company in companies %}
			{% if company == product.company %}
			<input type="radio" name="company1" value="{{company}}" checked="true"><label>{{company}}</label>
            <br>
			{% else %}
			<input type="radio" name="company1" value="{{company}}">
			<label>{{company}}</label>
			<br>
			{% endif %}
			{% endfor %}
			<h6 class="mt-3">Else you can enter a new company name here:</h6>
				<input type="text" name="company2" value="{{company}}">
				<h6 class="my-3">Category:</h6>
				<h6 class="mt-2">If you want to choose from the existing categories then choose one from below:</h6>
				{% for category in categories %}
				{% if category == product.category %}
				<input type="radio" name="category1" value="{{category}}" checked="true">
				<label>{{category}}</label>
				<br>
				{% else %}
				<input type="radio" name="category1" value="{{category}}">
				<label>{{category}}</label>
				<br>
				{% endif %}
				{% endfor %}
				<h6 class="mt-3">Else you can enter a new category name here:</h6>
			<input type="text" name="category2" value="{{category}}">
			<h6 class="mt-3">Tags:</h6>
			<h6>If you want to select from existing tags then select from below:</h6>
			{% for tag in tags %}
			{% if tag in product.tags.all %}
			<input type="checkbox" value="{{tag.name}}" checked="true" class="checked_tags">{{tag.name}}
			<br>
			{% else %}
			<input type="checkbox" value="{{tag.name}}" class="checked_tags">{{tag.name}}
			<br>
			{% endif %}
			{% endfor %}
			<h6 class="mt-3">Else you can enter new tag also using 'comma' as differenciator..</h6>
			<input type="text" name="tag" id="checked_tags_value">
			<br>
			<div class="text-center">
			<input type="submit" value="submit" name="submit" class="mt-4">
			<a href="{% url 'product:product_detail' pk=product.id %}" class="btn btn-success">Back</a>
		</div>
		</form>
	</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.js"></script>
<script>
$(document).ready(function() {
	$('.checked_tags').click(function() {
		var txt = "";
		$('.checked_tags:checked').each(function() {
			txt += $(this).val()+',';
		});
		$('#checked_tags_value').val(txt);
	});
});
</script>
{% endblock %}